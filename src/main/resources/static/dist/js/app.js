(function(){"use strict";var e={787:function(e,t,s){var o=s(9242),n=s(3396);const i={class:"content w-100 mx-auto"};function l(e,t,s,o,l,r){const a=(0,n.up)("DeletePopup"),c=(0,n.up)("MainNavigation"),d=(0,n.up)("SessionList"),u=(0,n.up)("CodeList"),p=(0,n.up)("UserList");return(0,n.wg)(),(0,n.iD)("section",i,[this.deletePopupVisible?((0,n.wg)(),(0,n.j4)(a,{key:0,element:this.elementToDelete,onDeletionConfirmed:r.confirmDeletion,onDeletionCanceled:r.hideDeletePopup},null,8,["element","onDeletionConfirmed","onDeletionCanceled"])):(0,n.kq)("",!0),(0,n.Wm)(c,{onSessions:t[0]||(t[0]=e=>r.show("sessions")),onCodes:t[1]||(t[1]=e=>r.show("codes")),onProfile:t[2]||(t[2]=e=>r.show("profile"))}),"sessions"===this.selected?((0,n.wg)(),(0,n.j4)(d,{key:1,elementToDelete:this.deletedElement,onDoneDeleting:r.hideDeletePopup,onShowDeletePopup:r.showDeletePopup},null,8,["elementToDelete","onDoneDeleting","onShowDeletePopup"])):(0,n.kq)("",!0),"codes"===this.selected?((0,n.wg)(),(0,n.j4)(u,{key:2,elementToDelete:this.deletedElement,onDoneDeleting:r.hideDeletePopup,onShowDeletePopup:r.showDeletePopup},null,8,["elementToDelete","onDoneDeleting","onShowDeletePopup"])):(0,n.kq)("",!0),"profile"===this.selected?((0,n.wg)(),(0,n.j4)(p,{key:3,elementToDelete:this.deletedElement,onDoneDeleting:r.hideDeletePopup,onShowDeletePopup:r.showDeletePopup},null,8,["elementToDelete","onDoneDeleting","onShowDeletePopup"])):(0,n.kq)("",!0)])}var r=s(7139);const a=e=>((0,n.dD)("data-v-ffcdcd42"),e=e(),(0,n.Cn)(),e),c=a((()=>(0,n._)("div",{class:"contain-link"},[(0,n._)("a",{class:"link",href:"../pageTeacher.html"}," Accueil ")],-1)));function d(e,t,s,o,i,l){return(0,n.wg)(),(0,n.iD)("nav",null,[c,(0,n._)("div",{class:"contain-link",onClick:t[0]||(t[0]=e=>l.setActiveTab("sessions"))},[(0,n._)("a",{class:(0,r.C_)(["link",{active:"sessions"===i.activeTab}]),"aria-current":"page",href:"#"},"Sessions",2)]),(0,n._)("div",{class:"contain-link",onClick:t[1]||(t[1]=e=>l.setActiveTab("codes"))},[(0,n._)("a",{class:(0,r.C_)(["link",{active:"codes"===i.activeTab}]),href:"#",tabindex:"-1","aria-disabled":"true"},"Codes",2)]),(0,n._)("div",{class:"contain-link",onClick:t[2]||(t[2]=e=>l.setActiveTab("profile"))},[(0,n._)("a",{class:(0,r.C_)(["link",{active:"profile"===i.activeTab}]),href:"#",tabindex:"-1","aria-disabled":"true"},"Profile",2)])])}var u={name:"app",emits:["sessions","codes","profile"],data(){return{activeTab:"sessions"}},methods:{setActiveTab(e){this.activeTab=e,this.$emit(this.activeTab),console.log("Changing active tab to : "+this.activeTab)}}},p=s(89);const h=(0,p.Z)(u,[["render",d],["__scopeId","data-v-ffcdcd42"]]);var m=h;const g={class:"delete-popup-overlay"},f={class:"window"},w={class:"boutons"};function D(e,t,s,o,i,l){return(0,n.wg)(),(0,n.iD)("div",g,[(0,n._)("div",f,[(0,n._)("p",null,"Voulez-vous vraiment supprimer "+(0,r.zw)(this.element.hasOwnProperty("username")?"cet utilisateur :"+this.element.username:(this.element.hasOwnProperty("instructions")?"ce code : ":"cette session : ")+this.element.name),1),(0,n._)("div",w,[(0,n._)("button",{class:"btn btn-danger",onClick:t[0]||(t[0]=(...e)=>l.confirmDeletion&&l.confirmDeletion(...e))},"Supprimer"),(0,n._)("button",{class:"btn btn-secondary",onClick:t[1]||(t[1]=(...e)=>l.cancelDeletion&&l.cancelDeletion(...e))},"Annuler")])])])}var v={name:"DeletePopup",props:["element"],methods:{confirmDeletion(){console.log("DeletePopup : user clicked on deletion confirmed"),this.$emit("deletion-confirmed",this.element),console.log("DeletePopup : emitting deletion-confirmed")},cancelDeletion(){console.log("DeletePopup : user clicked on deletion cancelled"),this.$emit("deletion-canceled"),console.log("DeletePopup : emitting deletion-cancelled")}}};const b=(0,p.Z)(v,[["render",D],["__scopeId","data-v-63696d10"]]);var k=b;const y={class:"sessions-list pt-3"},C={key:1,class:"fw-bold"};function _(e,t,s,o,i,l){const r=(0,n.up)("AlertPopUp"),a=(0,n.up)("session-list-item");return(0,n.wg)(),(0,n.iD)("div",y,[""!==e.alertMessage?((0,n.wg)(),(0,n.j4)(r,{key:0,message:this.alertMessage,type:this.alertType,onCloseAlert:t[0]||(t[0]=e=>{this.alertMessage="",this.alertType=""})},null,8,["message","type"])):(0,n.kq)("",!0),0===e.sessions.length&&""===this.alertMessage?((0,n.wg)(),(0,n.iD)("p",C,"Aucune Session créée")):((0,n.wg)(!0),(0,n.iD)(n.HY,{key:2},(0,n.Ko)(e.sessions,(e=>((0,n.wg)(),(0,n.j4)(a,{session:e,key:e.id,onDeleteClick:l.handleDelete},null,8,["session","onDeleteClick"])))),128))])}const T={class:"border border-secondary rounded p-2 mb-2"},U={class:"row d-flex"},P={class:"fw-bold pe-3"},S={class:"text-muted"},L={class:"text-muted"},I={class:"text-muted"},M={class:"text-muted"};function A(e,t,s,o,i,l){return(0,n.wg)(),(0,n.iD)("div",T,[(0,n._)("div",U,[(0,n._)("div",P,"Nom : "+(0,r.zw)(s.session.name),1),(0,n._)("div",S,"Id : "+(0,r.zw)(s.session.password),1),(0,n._)("div",L,"Date de création : "+(0,r.zw)(s.session.startDate),1),(0,n._)("div",I,"Date de fin : "+(0,r.zw)(s.session.endDate),1),(0,n._)("div",M,"Utilisateur max : "+(0,r.zw)(s.session.nombreMax),1)]),(0,n._)("button",{class:"btn btn-danger",onClick:t[0]||(t[0]=(...e)=>l.handleDeleteClick&&l.handleDeleteClick(...e))},"Supprimer")])}var j={name:"SessionListItem",props:["session"],methods:{handleDeleteClick(){console.log("SessionListItem : user clicked on delete button"),this.$emit("delete-click",this.session),console.log("SessionListItem : emitted delete-click to SessionList with session attached")}}};const F=(0,p.Z)(j,[["render",A]]);var x=F;const O={class:"error-message"};function $(e,t,s,o,i,l){return(0,n.wg)(),(0,n.iD)("div",{class:(0,r.C_)(["alert d-flex align-items-center justify-content-center","alert-"+this.type]),role:"alert"},[(0,n._)("p",O,(0,r.zw)(this.message),1),(0,n._)("button",{type:"button",class:"btn-close ms-auto",onClick:t[0]||(t[0]=(...e)=>l.closeAlert&&l.closeAlert(...e))})],2)}var E={name:"AlertPopUp",props:["message","type"],methods:{closeAlert(){this.$emit("close-alert")}}};const z=(0,p.Z)(E,[["render",$],["__scopeId","data-v-01aadc60"]]);var Z=z,H={components:{AlertPopUp:Z,SessionListItem:x},name:"SessionList",props:["elementToDelete"],data:function(){return{sessions:[],alertMessage:"",alertType:""}},created:async function(){fetch("/api/sessions").then((e=>{if(!e.ok)throw this.alertMessage=`HTTP error! Status: ${e.status}`,this.alertType="danger",new Error("Server response was not ok");return console.log(e),e.json()})).then((e=>{console.log(e),this.sessions=e}))},watch:{elementToDelete:function(e){console.log("SessionList : ElementToDelete changed"),Object.prototype.hasOwnProperty.call(e,"status")&&(console.log("SessionList : value changed to session, deleting it"),this.handleDeleteConfirmed(e))}},methods:{handleDelete(e){console.log("SessionList : received delete-click from UserListItem"),this.$emit("show-delete-popup",e),console.log("SessionList : emitted show-delete-popup to App with session attached")},handleDeleteConfirmed(e){const t=this.sessions.findIndex((t=>t.id===e.id));-1!==t&&this.sessions.splice(t,1),console.log("SessionList : Element deleted from sessions")}}};const V=(0,p.Z)(H,[["render",_],["__scopeId","data-v-38187d49"]]);var q=V;const Y={class:"codes-list pt-3"};function N(e,t,s,o,i,l){const r=(0,n.up)("AlertPopUp"),a=(0,n.up)("CodeListItem");return(0,n.wg)(),(0,n.iD)("div",Y,[""!==e.alertMessage?((0,n.wg)(),(0,n.j4)(r,{key:0,message:this.alertMessage,type:this.alertType,onCloseAlert:t[0]||(t[0]=e=>{this.alertMessage="",this.alertType=""})},null,8,["message","type"])):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.codes,(e=>((0,n.wg)(),(0,n.j4)(a,{code:e,key:e.id,onDeleteClick:l.handleDelete},null,8,["code","onDeleteClick"])))),128))])}const K={class:"building border border-secondary rounded p-2 mb-2"},R={class:"fw-bold pe-3"},J=(0,n._)("hr",null,null,-1);function W(e,t,s,o,i,l){const a=(0,n.up)("InstructionListItem");return(0,n.wg)(),(0,n.iD)("div",K,[(0,n._)("div",R,(0,r.zw)(s.code.name),1),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.sortedInstructions,(e=>((0,n.wg)(),(0,n.j4)(a,{instruction:e,key:e.id},null,8,["instruction"])))),128)),J,(0,n._)("button",{class:"btn btn-danger",onClick:t[0]||(t[0]=(...e)=>l.handleDeleteClick&&l.handleDeleteClick(...e))},"Supprimer")])}const B=(0,n._)("hr",null,null,-1),G={class:"text-muted"};function Q(e,t,s,o,i,l){return(0,n.wg)(),(0,n.iD)(n.HY,null,[B,(0,n._)("div",G,(0,r.zw)(s.instruction.name),1)],64)}var X={name:"InstructionListItem",props:["instruction"]};const ee=(0,p.Z)(X,[["render",Q]]);var te=ee,se={components:{InstructionListItem:te},name:"CodeListItem",props:["code"],computed:{sortedInstructions(){return this.code.instructions.slice().sort(((e,t)=>e.orderInCode-t.orderInCode))}},methods:{handleDeleteClick(){console.log("CodeListItem : user clicked on delete button"),this.$emit("delete-click",this.code),console.log("CodeListItem : emitted delete-click to CodeList with code attached")}}};const oe=(0,p.Z)(se,[["render",W]]);var ne=oe,ie={components:{AlertPopUp:Z,CodeListItem:ne},name:"CodeList",props:["elementToDelete"],data:function(){return{codes:[],alertMessage:"",alertType:""}},watch:{elementToDelete:function(e){console.log("CodeList : ElementToDelete changed"),Object.prototype.hasOwnProperty.call(e,"instructions")&&(console.log("CodeList : value changed to code, deleting it"),this.handleDeleteConfirmed(e))}},created:async function(){fetch("/api/codes").then((e=>{if(!e.ok)throw this.alertMessage=`HTTP error! Status: ${e.status}`,this.alertType="danger",new Error("Server response was not ok");return console.log(e),e.json()})).then((e=>{console.log(e),this.codes=e}))},methods:{handleDelete(e){console.log("UserList : received delete-click from UserListItem"),this.$emit("show-delete-popup",e),console.log("CodeList : emitted show-delete-popup to App with code attached")},handleDeleteConfirmed(e){const t=this.codes.findIndex((t=>t.id===e.id));-1!==t&&this.codes.splice(t,1),console.log("CodeList : Element deleted from codes")}}};const le=(0,p.Z)(ie,[["render",N],["__scopeId","data-v-6e4c4152"]]);var re=le;const ae={class:"user-list pt-3"};function ce(e,t,s,o,i,l){const r=(0,n.up)("AlertPopUp"),a=(0,n.up)("UserListItem");return(0,n.wg)(),(0,n.iD)(n.HY,null,[""!==e.alertMessage?((0,n.wg)(),(0,n.j4)(r,{key:0,message:this.alertMessage,type:this.alertType,onCloseAlert:t[0]||(t[0]=e=>{this.alertMessage="",this.alertType=""})},null,8,["message","type"])):(0,n.kq)("",!0),(0,n._)("div",ae,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.users,(e=>((0,n.wg)(),(0,n.j4)(a,{user:e,key:e.id,onUpdateUser:l.updateUser,onDeleteClick:l.handleDelete},null,8,["user","onUpdateUser","onDeleteClick"])))),128))])],64)}const de={class:"border border-secondary rounded p-2 mb-2"},ue={class:"top-row d-flex"},pe={class:"fw-bold pe-3"},he=(0,n._)("hr",null,null,-1),me={class:"d-flex"},ge={class:"text-muted pe-3"},fe=(0,n._)("hr",null,null,-1),we={class:"d-flex"},De={class:"text-muted pe-3"},ve=(0,n._)("hr",null,null,-1),be={class:"bottom-row d-flew"};function ke(e,t,s,o,i,l){const a=(0,n.up)("AlertPopUp"),c=(0,n.up)("UserForm");return(0,n.wg)(),(0,n.iD)("div",de,[""!==i.alertMessage?((0,n.wg)(),(0,n.j4)(a,{key:0,message:this.alertMessage,type:this.alertType,onCloseAlert:t[0]||(t[0]=e=>{this.alertMessage="",this.alertType=""})},null,8,["message","type"])):(0,n.kq)("",!0),(0,n._)("div",ue,[(0,n._)("div",pe,"Nom d'utilisateur : "+(0,r.zw)(s.user.username),1),i.usernameForm?((0,n.wg)(),(0,n.j4)(c,{key:1,usage:"username",id:s.user.id,onCancel:t[2]||(t[2]=e=>i.usernameForm=!1),onUpdateSuccess:l.handleUpdateSuccess,onUpdateFailed:l.handleUpdateFail},null,8,["id","onUpdateSuccess","onUpdateFailed"])):((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-secondary ms-auto",onClick:t[1]||(t[1]=e=>i.usernameForm=!0)},"Modifier"))]),he,(0,n._)("div",me,[(0,n._)("div",ge,"Email : "+(0,r.zw)(s.user.email),1),i.emailForm?((0,n.wg)(),(0,n.j4)(c,{key:1,usage:"email",id:s.user.id,onCancel:t[4]||(t[4]=e=>i.emailForm=!1),onUpdateSuccess:l.handleUpdateSuccess,onUpdateFailed:l.handleUpdateFail},null,8,["id","onUpdateSuccess","onUpdateFailed"])):((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-secondary ms-auto",onClick:t[3]||(t[3]=e=>i.emailForm=!0)},"Modifier"))]),fe,(0,n._)("div",we,[(0,n._)("div",De,"Mot de passe : "+(0,r.zw)(s.user.password),1),i.passwordForm?((0,n.wg)(),(0,n.j4)(c,{key:1,usage:"password",id:s.user.id,onCancel:t[6]||(t[6]=e=>i.passwordForm=!1),onUpdateSuccess:l.handleUpdateSuccess,onUpdateFailed:l.handleUpdateFail},null,8,["id","onUpdateSuccess","onUpdateFailed"])):((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-secondary ms-auto",onClick:t[5]||(t[5]=e=>i.passwordForm=!0)},"Modifier"))]),ve,(0,n._)("div",be,[(0,n._)("button",{class:"btn btn-danger",onClick:t[7]||(t[7]=(...e)=>l.handleDeleteClick&&l.handleDeleteClick(...e))},"Supprimer")])])}const ye=(0,n._)("button",{type:"submit",class:"btn btn-primary me-5"},"Modifier",-1);function Ce(e,t,s,i,l,r){return(0,n.wg)(),(0,n.iD)("form",{onSubmit:t[2]||(t[2]=(0,o.iM)(((...e)=>r.handleSubmit&&r.handleSubmit(...e)),["prevent"]))},[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.userInput=e),type:"text",class:"form-control mb-3 space-between-elements"},null,512),[[o.nr,l.userInput]]),ye,(0,n._)("button",{type:"button",class:"btn btn-secondary",onClick:t[1]||(t[1]=e=>this.$emit("cancel"))},"Annuler")],32)}var _e={name:"UserForm",props:["usage","id"],created(){console.log("Received prop usage:",this.usage),console.log("Received prop usage:",this.id)},data(){return{userInput:"",endpoint:"/api/users",dataToSend:{}}},methods:{async handleSubmit(){this.endpoint="/api/users/"+String(this.id),""===this.userInput?(console.log("Missing argument"),this.$emit("update-failed","Missing argument: "+this.usage)):(console.log(this.userInput),console.log(this.usage),this.dataToSend={[this.usage]:this.userInput},console.log(this.dataToSend),fetch(this.endpoint,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(this.dataToSend)}).then((e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.json()})).then((e=>{console.log("Update successful:",e),this.$emit("update-success",e,this.usage)})).catch((e=>{this.$emit("update-failed",e.message),console.error("Update failed:",e.message)})))}}};const Te=(0,p.Z)(_e,[["render",Ce]]);var Ue=Te,Pe={name:"UserListItem",components:{AlertPopUp:Z,UserForm:Ue},props:["user"],data(){return{usernameForm:!1,emailForm:!1,passwordForm:!1,alertMessage:"",alertType:""}},methods:{handleUpdateSuccess(e,t){this.$emit("update-user",e),this.alertMessage="Changement réussi",this.alertType="success","username"===t?this.usernameForm=!1:"email"===t?this.emailForm=!1:"password"===t&&(this.passwordForm=!1)},handleUpdateFail(e){this.alertMessage=e,this.alertType="danger"},handleDeleteClick(){console.log("UserListItem : user clicked on delete button"),this.$emit("delete-click",this.user),console.log("UserListItem : emitted delete-click to UserList with user attached")}}};const Se=(0,p.Z)(Pe,[["render",ke]]);var Le=Se,Ie={name:"UserList",components:{AlertPopUp:Z,UserListItem:Le},props:["elementToDelete"],data:function(){return{users:[],alertMessage:"",alertType:""}},watch:{elementToDelete:function(e){console.log("UserList : ElementToDelete changed"),Object.prototype.hasOwnProperty.call(e,"username")&&(console.log("UserList : value changed to user, deleting it"),this.handleDeleteConfirmed(e))}},created:async function(){fetch("/api/users").then((e=>{if(!e.ok)throw this.alertMessage=`HTTP error! Status: ${e.status}`,this.alertType="danger",new Error("Server response was not ok");return console.log(e),e.json()})).then((e=>{console.log(e),this.users=e}))},methods:{updateUser(e){const t=this.users.findIndex((t=>t.id===e.id));-1!==t&&(this.users[t]=e)},handleDelete(e){console.log("UserList : received delete-click from UserListItem"),this.$emit("show-delete-popup",e),console.log("UserList : emitted show-delete-popup to App with user attached")},handleDeleteConfirmed(e){const t=this.users.findIndex((t=>t.id===e.id));-1!==t&&this.users.splice(t,1),console.log("UserList : Element deleted from users")}}};const Me=(0,p.Z)(Ie,[["render",ce],["__scopeId","data-v-6510af5b"]]);var Ae=Me,je={name:"App",components:{DeletePopup:k,UserList:Ae,CodeList:re,SessionList:q,MainNavigation:m},data:function(){return{selected:"sessions",backgroundVisibility:!1,deletePopupVisible:!1,elementToDelete:null,deletedElement:null}},methods:{show(e){this.selected=e,this.hideDeletePopup()},showDeletePopup(e){console.log("App : Received show-delete-popup from UserList, showing deletePopup and changing elementToDelete variable"),console.log("App : concercened element :"),console.log(e),this.backgroundVisibility=!0,this.deletePopupVisible=!0,this.elementToDelete=e},hideDeletePopup(){console.log("App : received deletion-canceled from DeletionPopup, hiding DeletePopup"),this.backgroundVisibility=!1,this.deletePopupVisible=!1,this.elementToDelete=null},confirmDeletion(e){console.log("App : received deletion-confirmed from DeletionPopup, changed deletedElement to user and hiding DeletePopup"),this.deletedElement=e,this.hideDeletePopup()}}};const Fe=(0,p.Z)(je,[["render",l],["__scopeId","data-v-176e498b"]]);var xe=Fe;(0,o.ri)(xe).mount("#app")}},t={};function s(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,s),i.exports}s.m=e,function(){var e=[];s.O=function(t,o,n,i){if(!o){var l=1/0;for(d=0;d<e.length;d++){o=e[d][0],n=e[d][1],i=e[d][2];for(var r=!0,a=0;a<o.length;a++)(!1&i||l>=i)&&Object.keys(s.O).every((function(e){return s.O[e](o[a])}))?o.splice(a--,1):(r=!1,i<l&&(l=i));if(r){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[o,n,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,i,l=o[0],r=o[1],a=o[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(n in r)s.o(r,n)&&(s.m[n]=r[n]);if(a)var d=a(s)}for(t&&t(o);c<l.length;c++)i=l[c],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(d)},o=self["webpackChunkwebsite_protech_vue"]=self["webpackChunkwebsite_protech_vue"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(787)}));o=s.O(o)})();
//# sourceMappingURL=app.js.map